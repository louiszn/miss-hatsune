on:
    push:
        branches: ["main"]

jobs:
    build:
        runs-on: self-hosted

        steps:
            - uses: actions/checkout@v4.2.1
            - run: bash -leo
            - run: deno install
            - run: |
                  touch .env
                  echo "${{ secrets.ENV }}" >> .env
            - name: Stop all proccess
              run: pm2 delete all || true
            - name: Start a new process
              run: pm2 start "deno -A src/index.ts"
